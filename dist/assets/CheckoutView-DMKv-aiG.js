import{o as i,c as u,a as t,g as m,n as f,t as d,k as v,s as N,l as S,m as $,q,x as O,d as _,w as C,F as V,r as I,u as h,f as P,e as F}from"./index-D0DeWAPE.js";const j={class:"bg-white border border-primary/20 rounded-lg p-6"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D=["value"],T={key:0,class:"mt-1 text-sm text-red-600"},E=["value"],A={key:0,class:"mt-1 text-sm text-red-600"},R={class:"bg-white border border-primary/20 rounded-lg p-6"},B={class:"space-y-4"},L=["value"],G={key:0,class:"mt-1 text-sm text-red-600"},z=["value"],H={key:0,class:"mt-1 text-sm text-red-600"},J=["value"],Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},U=["value"],K={key:0,class:"mt-1 text-sm text-red-600"},W=["value"],X={key:0,class:"mt-1 text-sm text-red-600"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z=["value"],tt={key:0,class:"mt-1 text-sm text-red-600"},et=["value"],st={key:0,class:"mt-1 text-sm text-red-600"},ot={class:"bg-white border border-primary/20 rounded-lg p-6"},rt={class:"space-y-3"},lt={class:"flex items-center"},at=["checked"],dt={class:"flex items-center"},nt=["checked"],it={__name:"CheckoutForm",props:{modelValue:{type:Object,default:()=>({email:"",phone:"",fullName:"",address1:"",address2:"",city:"",state:"",postalCode:"",country:"",paymentMethod:"credit-card"})}},emits:["update:modelValue","submit"],setup(k,{emit:g}){const p=k,c=g,r=$({}),l=S({get:()=>p.modelValue,set:s=>c("update:modelValue",s)});function n(s,e){c("update:modelValue",{...p.modelValue,[s]:e}),r.value[s]&&delete r.value[s]}function y(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}function o(){const s={};return l.value.email?y(l.value.email)||(s.email="Please enter a valid email"):s.email="Email is required",l.value.phone||(s.phone="Phone number is required"),l.value.fullName||(s.fullName="Full name is required"),l.value.address1||(s.address1="Address is required"),l.value.city||(s.city="City is required"),l.value.state||(s.state="State/Region is required"),l.value.postalCode||(s.postalCode="Postal code is required"),l.value.country||(s.country="Country is required"),r.value=s,Object.keys(s).length===0}function b(){o()&&c("submit",l.value)}return(s,e)=>(i(),u("form",{onSubmit:N(b,["prevent"]),class:"space-y-8"},[t("div",j,[e[13]||(e[13]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"Contact Information",-1)),t("div",M,[t("div",null,[e[11]||(e[11]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" Email "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"email",value:l.value.email,onInput:e[0]||(e[0]=a=>n("email",a.target.value)),type:"email",class:f(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":r.value.email}])},null,42,D),r.value.email?(i(),u("p",T,d(r.value.email),1)):v("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" Phone "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"phone",value:l.value.phone,onInput:e[1]||(e[1]=a=>n("phone",a.target.value)),type:"tel",class:f(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":r.value.phone}])},null,42,E),r.value.phone?(i(),u("p",A,d(r.value.phone),1)):v("",!0)])])]),t("div",R,[e[21]||(e[21]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"Shipping Address",-1)),t("div",B,[t("div",null,[e[14]||(e[14]=t("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" Full Name "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"fullName",value:l.value.fullName,onInput:e[2]||(e[2]=a=>n("fullName",a.target.value)),type:"text",class:f(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":r.value.fullName}])},null,42,L),r.value.fullName?(i(),u("p",G,d(r.value.fullName),1)):v("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{for:"address1",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" Address Line 1 "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"address1",value:l.value.address1,onInput:e[3]||(e[3]=a=>n("address1",a.target.value)),type:"text",class:f(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":r.value.address1}])},null,42,z),r.value.address1?(i(),u("p",H,d(r.value.address1),1)):v("",!0)]),t("div",null,[e[16]||(e[16]=t("label",{for:"address2",class:"block text-sm font-medium text-gray-700 mb-1"}," Address Line 2 (Optional) ",-1)),t("input",{id:"address2",value:l.value.address2,onInput:e[4]||(e[4]=a=>n("address2",a.target.value)),type:"text",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"},null,40,J)]),t("div",Q,[t("div",null,[e[17]||(e[17]=t("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" City "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"city",value:l.value.city,onInput:e[5]||(e[5]=a=>n("city",a.target.value)),type:"text",class:f(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":r.value.city}])},null,42,U),r.value.city?(i(),u("p",K,d(r.value.city),1)):v("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" State/Region "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"state",value:l.value.state,onInput:e[6]||(e[6]=a=>n("state",a.target.value)),type:"text",class:f(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":r.value.state}])},null,42,W),r.value.state?(i(),u("p",X,d(r.value.state),1)):v("",!0)])]),t("div",Y,[t("div",null,[e[19]||(e[19]=t("label",{for:"postalCode",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" Postal Code "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"postalCode",value:l.value.postalCode,onInput:e[7]||(e[7]=a=>n("postalCode",a.target.value)),type:"text",class:f(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":r.value.postalCode}])},null,42,Z),r.value.postalCode?(i(),u("p",tt,d(r.value.postalCode),1)):v("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{for:"country",class:"block text-sm font-medium text-gray-700 mb-1"},[m(" Country "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"country",value:l.value.country,onInput:e[8]||(e[8]=a=>n("country",a.target.value)),type:"text",class:f(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":r.value.country}])},null,42,et),r.value.country?(i(),u("p",st,d(r.value.country),1)):v("",!0)])])])]),t("div",ot,[e[24]||(e[24]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"Payment Method",-1)),t("div",rt,[t("div",lt,[t("input",{id:"credit-card",checked:l.value.paymentMethod==="credit-card",onChange:e[9]||(e[9]=a=>n("paymentMethod","credit-card")),type:"radio",name:"payment",class:"w-4 h-4 text-primary focus:ring-primary"},null,40,at),e[22]||(e[22]=t("label",{for:"credit-card",class:"ml-3 text-gray-700"},"Credit Card (Payment integration coming soon)",-1))]),t("div",dt,[t("input",{id:"paypal",checked:l.value.paymentMethod==="paypal",onChange:e[10]||(e[10]=a=>n("paymentMethod","paypal")),type:"radio",name:"payment",class:"w-4 h-4 text-primary focus:ring-primary"},null,40,nt),e[23]||(e[23]=t("label",{for:"paypal",class:"ml-3 text-gray-700"},"PayPal (Payment integration coming soon)",-1))])]),e[25]||(e[25]=t("p",{class:"mt-4 text-sm text-gray-500"}," Note: This is a demo checkout. No actual payment will be processed. ",-1))]),e[26]||(e[26]=t("div",null,[t("button",{type:"submit",class:"w-full px-6 py-4 bg-primary text-primary-foreground font-bold text-lg rounded-lg hover:opacity-90 focus:ring-2 focus:ring-primary focus:ring-offset-2 transition shadow-md hover:shadow-lg"}," Place Order ")],-1))],32))}},ut={class:"min-h-screen bg-white"},pt={class:"bg-primary/5 border-b border-primary/20"},mt={class:"container mx-auto px-4 py-3"},ct={class:"flex items-center gap-2 text-sm"},yt={class:"py-12"},ft={class:"container mx-auto px-4"},vt={class:"grid lg:grid-cols-3 gap-8"},bt={class:"lg:col-span-2"},gt={class:"lg:col-span-1"},xt={class:"sticky top-4"},_t={class:"bg-primary/5 border border-primary/30 rounded-lg p-6"},ht={class:"space-y-3 mb-4 pb-4 border-b border-primary/30"},wt={class:"flex-1"},kt={class:"font-medium text-gray-900"},Ct={class:"text-gray-600"},$t={class:"font-semibold text-gray-900"},Nt={class:"space-y-2"},St={class:"flex justify-between text-gray-700"},qt={class:"font-semibold"},Ot={class:"flex justify-between text-gray-700"},Vt={class:"font-semibold"},It={class:"flex justify-between text-gray-700"},Pt={class:"font-semibold"},Ft={class:"border-t border-primary/30 pt-2 mt-2"},jt={class:"flex justify-between text-foreground text-lg font-bold"},w=0,x=0,Dt={__name:"CheckoutView",setup(k){const g=P(),p=q();function c(y){return new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(y)}const r=$({email:"",phone:"",fullName:"",address1:"",address2:"",city:"",state:"",postalCode:"",country:"",paymentMethod:"credit-card"});O(()=>{p.items.length===0&&g.push("/cart")});async function l(y){const o="ORD-"+Date.now(),b={orderNumber:o,customer:y,items:p.items.map(s=>({id:s.product.id,name:s.product.name,price:s.product.price,quantity:s.quantity,total:s.product.price*s.quantity})),subtotal:p.subtotal,shipping:w,tax:x,total:p.subtotal+w+x,timestamp:new Date().toISOString()};console.log("Order placed:",b);try{await n(b),console.log("Order saved to database successfully")}catch(s){console.error("Failed to save order to database:",s)}p.clearCart(),g.push({name:"OrderConfirmation",query:{orderNumber:o}})}async function n(y){const o=await fetch("http://localhost:3001/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!o.ok)throw new Error("Failed to save order");return o.json()}return(y,o)=>{const b=F("router-link");return i(),u("div",ut,[t("div",pt,[t("div",mt,[t("nav",ct,[_(b,{to:"/",class:"text-primary hover:opacity-90 font-medium"},{default:C(()=>[...o[1]||(o[1]=[m("Home",-1)])]),_:1}),o[3]||(o[3]=t("span",{class:"text-gray-400"},"›",-1)),_(b,{to:"/cart",class:"text-primary hover:opacity-90 font-medium"},{default:C(()=>[...o[2]||(o[2]=[m("Cart",-1)])]),_:1}),o[4]||(o[4]=t("span",{class:"text-gray-400"},"›",-1)),o[5]||(o[5]=t("span",{class:"text-gray-700"},"Checkout",-1))])])]),t("section",yt,[t("div",ft,[o[11]||(o[11]=t("h1",{class:"text-4xl font-bold text-foreground mb-8"},"Checkout",-1)),t("div",vt,[t("div",bt,[_(it,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=s=>r.value=s),onSubmit:l},null,8,["modelValue"])]),t("div",gt,[t("div",xt,[t("div",_t,[o[10]||(o[10]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"Order Summary",-1)),t("div",ht,[(i(!0),u(V,null,I(h(p).items,s=>(i(),u("div",{key:s.product.id,class:"flex justify-between text-sm"},[t("div",wt,[t("p",kt,d(s.product.name),1),t("p",Ct,"Qty: "+d(s.quantity),1)]),t("p",$t,d(c(s.product.price*s.quantity)),1)]))),128))]),t("div",Nt,[t("div",St,[o[6]||(o[6]=t("span",null,"Subtotal",-1)),t("span",qt,d(c(h(p).subtotal)),1)]),t("div",Ot,[o[7]||(o[7]=t("span",null,"Shipping",-1)),t("span",Vt,d("Free"),1)]),t("div",It,[o[8]||(o[8]=t("span",null,"Tax",-1)),t("span",Pt,d(c(x)),1)]),t("div",Ft,[t("div",jt,[o[9]||(o[9]=t("span",null,"Total",-1)),t("span",null,d(c(h(p).subtotal+w+x)),1)])])])])])])])])])])}}};export{Dt as default};
