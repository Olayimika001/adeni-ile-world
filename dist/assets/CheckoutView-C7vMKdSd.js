import{o as u,c as p,b as t,g as c,n as y,t as i,i as f,p as N,j as S,k as $,m as q,q as F,d as _,w as C,F as O,r as V,u as h,f as P,e as I}from"./index-JK4yJY4X.js";const j={class:"bg-white border border-primary/20 rounded-lg p-6"},M={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},D=["value"],T={key:0,class:"mt-1 text-sm text-red-600"},E=["value"],A={key:0,class:"mt-1 text-sm text-red-600"},R={class:"bg-white border border-primary/20 rounded-lg p-6"},B={class:"space-y-4"},L=["value"],z={key:0,class:"mt-1 text-sm text-red-600"},H=["value"],J={key:0,class:"mt-1 text-sm text-red-600"},Q=["value"],U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G=["value"],K={key:0,class:"mt-1 text-sm text-red-600"},W=["value"],X={key:0,class:"mt-1 text-sm text-red-600"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z=["value"],tt={key:0,class:"mt-1 text-sm text-red-600"},et=["value"],st={key:0,class:"mt-1 text-sm text-red-600"},ot={class:"bg-white border border-primary/20 rounded-lg p-6"},rt={class:"space-y-3"},lt={class:"flex items-center"},at=["checked"],dt={class:"flex items-center"},nt=["checked"],it={__name:"CheckoutForm",props:{modelValue:{type:Object,default:()=>({email:"",phone:"",fullName:"",address1:"",address2:"",city:"",state:"",postalCode:"",country:"",paymentMethod:"credit-card"})}},emits:["update:modelValue","submit"],setup(w,{emit:g}){const m=w,b=g,o=$({}),r=S({get:()=>m.modelValue,set:l=>b("update:modelValue",l)});function n(l,e){b("update:modelValue",{...m.modelValue,[l]:e}),o.value[l]&&delete o.value[l]}function s(l){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)}function v(){const l={};return r.value.email?s(r.value.email)||(l.email="Please enter a valid email"):l.email="Email is required",r.value.phone||(l.phone="Phone number is required"),r.value.fullName||(l.fullName="Full name is required"),r.value.address1||(l.address1="Address is required"),r.value.city||(l.city="City is required"),r.value.state||(l.state="State/Region is required"),r.value.postalCode||(l.postalCode="Postal code is required"),r.value.country||(l.country="Country is required"),o.value=l,Object.keys(l).length===0}function d(){v()&&b("submit",r.value)}return(l,e)=>(u(),p("form",{onSubmit:N(d,["prevent"]),class:"space-y-8"},[t("div",j,[e[13]||(e[13]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"Contact Information",-1)),t("div",M,[t("div",null,[e[11]||(e[11]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},[c(" Email "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"email",value:r.value.email,onInput:e[0]||(e[0]=a=>n("email",a.target.value)),type:"email",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":o.value.email}])},null,42,D),o.value.email?(u(),p("p",T,i(o.value.email),1)):f("",!0)]),t("div",null,[e[12]||(e[12]=t("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},[c(" Phone "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"phone",value:r.value.phone,onInput:e[1]||(e[1]=a=>n("phone",a.target.value)),type:"tel",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":o.value.phone}])},null,42,E),o.value.phone?(u(),p("p",A,i(o.value.phone),1)):f("",!0)])])]),t("div",R,[e[21]||(e[21]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"Shipping Address",-1)),t("div",B,[t("div",null,[e[14]||(e[14]=t("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-1"},[c(" Full Name "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"fullName",value:r.value.fullName,onInput:e[2]||(e[2]=a=>n("fullName",a.target.value)),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":o.value.fullName}])},null,42,L),o.value.fullName?(u(),p("p",z,i(o.value.fullName),1)):f("",!0)]),t("div",null,[e[15]||(e[15]=t("label",{for:"address1",class:"block text-sm font-medium text-gray-700 mb-1"},[c(" Address Line 1 "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"address1",value:r.value.address1,onInput:e[3]||(e[3]=a=>n("address1",a.target.value)),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":o.value.address1}])},null,42,H),o.value.address1?(u(),p("p",J,i(o.value.address1),1)):f("",!0)]),t("div",null,[e[16]||(e[16]=t("label",{for:"address2",class:"block text-sm font-medium text-gray-700 mb-1"}," Address Line 2 (Optional) ",-1)),t("input",{id:"address2",value:r.value.address2,onInput:e[4]||(e[4]=a=>n("address2",a.target.value)),type:"text",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"},null,40,Q)]),t("div",U,[t("div",null,[e[17]||(e[17]=t("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-1"},[c(" City "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"city",value:r.value.city,onInput:e[5]||(e[5]=a=>n("city",a.target.value)),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":o.value.city}])},null,42,G),o.value.city?(u(),p("p",K,i(o.value.city),1)):f("",!0)]),t("div",null,[e[18]||(e[18]=t("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-1"},[c(" State/Region "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"state",value:r.value.state,onInput:e[6]||(e[6]=a=>n("state",a.target.value)),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":o.value.state}])},null,42,W),o.value.state?(u(),p("p",X,i(o.value.state),1)):f("",!0)])]),t("div",Y,[t("div",null,[e[19]||(e[19]=t("label",{for:"postalCode",class:"block text-sm font-medium text-gray-700 mb-1"},[c(" Postal Code "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"postalCode",value:r.value.postalCode,onInput:e[7]||(e[7]=a=>n("postalCode",a.target.value)),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":o.value.postalCode}])},null,42,Z),o.value.postalCode?(u(),p("p",tt,i(o.value.postalCode),1)):f("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{for:"country",class:"block text-sm font-medium text-gray-700 mb-1"},[c(" Country "),t("span",{class:"text-red-500"},"*")],-1)),t("input",{id:"country",value:r.value.country,onInput:e[8]||(e[8]=a=>n("country",a.target.value)),type:"text",class:y(["w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary",{"border-red-500":o.value.country}])},null,42,et),o.value.country?(u(),p("p",st,i(o.value.country),1)):f("",!0)])])])]),t("div",ot,[e[24]||(e[24]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"Payment Method",-1)),t("div",rt,[t("div",lt,[t("input",{id:"credit-card",checked:r.value.paymentMethod==="credit-card",onChange:e[9]||(e[9]=a=>n("paymentMethod","credit-card")),type:"radio",name:"payment",class:"w-4 h-4 text-primary focus:ring-primary"},null,40,at),e[22]||(e[22]=t("label",{for:"credit-card",class:"ml-3 text-gray-700"},"Credit Card (Payment integration coming soon)",-1))]),t("div",dt,[t("input",{id:"paypal",checked:r.value.paymentMethod==="paypal",onChange:e[10]||(e[10]=a=>n("paymentMethod","paypal")),type:"radio",name:"payment",class:"w-4 h-4 text-primary focus:ring-primary"},null,40,nt),e[23]||(e[23]=t("label",{for:"paypal",class:"ml-3 text-gray-700"},"PayPal (Payment integration coming soon)",-1))])]),e[25]||(e[25]=t("p",{class:"mt-4 text-sm text-gray-500"}," Note: This is a demo checkout. No actual payment will be processed. ",-1))]),e[26]||(e[26]=t("div",null,[t("button",{type:"submit",class:"w-full px-6 py-4 bg-primary text-primary-foreground font-bold text-lg rounded-lg hover:opacity-90 focus:ring-2 focus:ring-primary focus:ring-offset-2 transition shadow-md hover:shadow-lg"}," Place Order ")],-1))],32))}},ut={class:"min-h-screen bg-white"},pt={class:"bg-primary/5 border-b border-primary/20"},mt={class:"container mx-auto px-4 py-3"},ct={class:"flex items-center gap-2 text-sm"},yt={class:"py-12"},ft={class:"container mx-auto px-4"},vt={class:"grid lg:grid-cols-3 gap-8"},bt={class:"lg:col-span-2"},gt={class:"lg:col-span-1"},xt={class:"sticky top-4"},_t={class:"bg-primary/5 border border-primary/30 rounded-lg p-6"},ht={class:"space-y-3 mb-4 pb-4 border-b border-primary/30"},kt={class:"flex-1"},wt={class:"font-medium text-gray-900"},Ct={class:"text-gray-600"},$t={class:"font-semibold text-gray-900"},Nt={class:"space-y-2"},St={class:"flex justify-between text-gray-700"},qt={class:"font-semibold"},Ft={class:"flex justify-between text-gray-700"},Ot={class:"font-semibold"},Vt={class:"flex justify-between text-gray-700"},Pt={class:"font-semibold"},It={class:"border-t border-primary/30 pt-2 mt-2"},jt={class:"flex justify-between text-foreground text-lg font-bold"},k=0,x=0,Dt={__name:"CheckoutView",setup(w){const g=P(),m=q(),b=$({email:"",phone:"",fullName:"",address1:"",address2:"",city:"",state:"",postalCode:"",country:"",paymentMethod:"credit-card"});F(()=>{m.items.length===0&&g.push("/cart")});async function o(n){const s="ORD-"+Date.now(),v={orderNumber:s,customer:n,items:m.items.map(d=>({id:d.product.id,name:d.product.name,price:d.product.price,quantity:d.quantity,total:d.product.price*d.quantity})),subtotal:m.subtotal,shipping:k,tax:x,total:m.subtotal+k+x,timestamp:new Date().toISOString()};console.log("Order placed:",v);try{await r(v),console.log("Order saved to database successfully")}catch(d){console.error("Failed to save order to database:",d)}m.clearCart(),g.push({name:"OrderConfirmation",query:{orderNumber:s}})}async function r(n){const s=await fetch("http://localhost:3001/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!s.ok)throw new Error("Failed to save order");return s.json()}return(n,s)=>{const v=I("router-link");return u(),p("div",ut,[t("div",pt,[t("div",mt,[t("nav",ct,[_(v,{to:"/",class:"text-primary hover:opacity-90 font-medium"},{default:C(()=>[...s[1]||(s[1]=[c("Home",-1)])]),_:1}),s[3]||(s[3]=t("span",{class:"text-gray-400"},"›",-1)),_(v,{to:"/cart",class:"text-primary hover:opacity-90 font-medium"},{default:C(()=>[...s[2]||(s[2]=[c("Cart",-1)])]),_:1}),s[4]||(s[4]=t("span",{class:"text-gray-400"},"›",-1)),s[5]||(s[5]=t("span",{class:"text-gray-700"},"Checkout",-1))])])]),t("section",yt,[t("div",ft,[s[11]||(s[11]=t("h1",{class:"text-4xl font-bold text-foreground mb-8"},"Checkout",-1)),t("div",vt,[t("div",bt,[_(it,{modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=d=>b.value=d),onSubmit:o},null,8,["modelValue"])]),t("div",gt,[t("div",xt,[t("div",_t,[s[10]||(s[10]=t("h2",{class:"text-xl font-bold text-foreground mb-4"},"Order Summary",-1)),t("div",ht,[(u(!0),p(O,null,V(h(m).items,d=>(u(),p("div",{key:d.product.id,class:"flex justify-between text-sm"},[t("div",kt,[t("p",wt,i(d.product.name),1),t("p",Ct,"Qty: "+i(d.quantity),1)]),t("p",$t," $"+i((d.product.price*d.quantity).toFixed(2)),1)]))),128))]),t("div",Nt,[t("div",St,[s[6]||(s[6]=t("span",null,"Subtotal",-1)),t("span",qt,"$"+i(h(m).subtotal.toFixed(2)),1)]),t("div",Ft,[s[7]||(s[7]=t("span",null,"Shipping",-1)),t("span",Ot,i("Free"),1)]),t("div",Vt,[s[8]||(s[8]=t("span",null,"Tax",-1)),t("span",Pt,"$"+i(x.toFixed(2)),1)]),t("div",It,[t("div",jt,[s[9]||(s[9]=t("span",null,"Total",-1)),t("span",null,"$"+i((h(m).subtotal+k+x).toFixed(2)),1)])])])])])])])])])])}}};export{Dt as default};
